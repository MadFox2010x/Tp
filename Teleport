-- // Mad Fox Admin Menu // --

if game.CoreGui:FindFirstChild("MadFoxAdmin") then
    game.CoreGui:FindFirstChild("MadFoxAdmin"):Destroy()
end

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- UI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MadFoxAdmin"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.CoreGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 240)
Frame.Position = UDim2.new(0.05, 0, 0.2, 0)
Frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 8)

local Title = Instance.new("TextLabel", Frame)
Title.Text = "Mad Fox Admin"
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20

local tpBox = Instance.new("TextBox", Frame)
tpBox.PlaceholderText = "Введите ник для ТП"
tpBox.Size = UDim2.new(1, -10, 0, 30)
tpBox.Position = UDim2.new(0, 5, 0, 35)
tpBox.BackgroundColor3 = Color3.fromRGB(40,40,40)
tpBox.TextColor3 = Color3.new(1,1,1)
tpBox.Font = Enum.Font.SourceSans
tpBox.TextSize = 16

local tpButton = Instance.new("TextButton", Frame)
tpButton.Text = "ТП к игроку"
tpButton.Size = UDim2.new(1, -10, 0, 30)
tpButton.Position = UDim2.new(0, 5, 0, 70)
tpButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
tpButton.TextColor3 = Color3.new(1,1,1)
tpButton.Font = Enum.Font.SourceSans
tpButton.TextSize = 16

local bringButton = Instance.new("TextButton", Frame)
bringButton.Text = "Притянуть игрока"
bringButton.Size = UDim2.new(1, -10, 0, 30)
bringButton.Position = UDim2.new(0, 5, 0, 105)
bringButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
bringButton.TextColor3 = Color3.new(1,1,1)
bringButton.Font = Enum.Font.SourceSans
bringButton.TextSize = 16

local flyButton = Instance.new("TextButton", Frame)
flyButton.Text = "Вкл/Выкл Флай (F)"
flyButton.Size = UDim2.new(1, -10, 0, 30)
flyButton.Position = UDim2.new(0, 5, 0, 140)
flyButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
flyButton.TextColor3 = Color3.new(1,1,1)
flyButton.Font = Enum.Font.SourceSans
flyButton.TextSize = 16

local info = Instance.new("TextLabel", Frame)
info.Text = "Скорость: + и - | Вверх: Пробел | Вниз: Shift"
info.TextWrapped = true
info.Size = UDim2.new(1, -10, 0, 40)
info.Position = UDim2.new(0, 5, 0, 175)
info.BackgroundTransparency = 1
info.TextColor3 = Color3.new(1,1,1)
info.Font = Enum.Font.SourceSansItalic
info.TextSize = 14

-- Телепорт к игроку
tpButton.MouseButton1Click:Connect(function()
    local targetName = tpBox.Text
    local target = Players:FindFirstChild(targetName)
    if target and target.Character then
        player.Character:MoveTo(target.Character:GetPrimaryPartCFrame().p + Vector3.new(0, 2, 0))
    end
end)

-- Притянуть игрока
bringButton.MouseButton1Click:Connect(function()
    local targetName = tpBox.Text
    local target = Players:FindFirstChild(targetName)
    if target and target.Character and player.Character then
        target.Character:MoveTo(player.Character:GetPrimaryPartCFrame().p + Vector3.new(2, 0, 0))
    end
end)

-- Флай
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local flying = false
local speed = 50
local vel

function toggleFly()
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
    flying = not flying
    if flying then
        vel = Instance.new("BodyVelocity", player.Character.HumanoidRootPart)
        vel.MaxForce = Vector3.new(1e5, 1e5, 1e5)
        vel.Velocity = Vector3.new()
        RS:BindToRenderStep("Fly", Enum.RenderPriority.Input.Value, function()
            local dir = Vector3.new()
            if UIS:IsKeyDown(Enum.KeyCode.W) then dir = dir + workspace.CurrentCamera.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.S) then dir = dir - workspace.CurrentCamera.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.A) then dir = dir - workspace.CurrentCamera.CFrame.RightVector end
            if UIS:IsKeyDown(Enum.KeyCode.D) then dir = dir + workspace.CurrentCamera.CFrame.RightVector end
            if UIS:IsKeyDown(Enum.KeyCode.Space) then dir = dir + Vector3.new(0,1,0) end
            if UIS:IsKeyDown(Enum.KeyCode.LeftShift) then dir = dir - Vector3.new(0,1,0) end
            if dir.Magnitude > 0 then
                vel.Velocity = dir.Unit * speed
            else
                vel.Velocity = Vector3.new()
            end
        end)
    else
        RS:UnbindFromRenderStep("Fly")
        if vel then vel:Destroy() end
    end
end

UIS.InputBegan:Connect(function(i,g)
    if g then return end
    if i.KeyCode == Enum.KeyCode.F then
        toggleFly()
    elseif i.KeyCode == Enum.KeyCode.Equals then
        speed = math.min(speed + 5, 150)
    elseif i.KeyCode == Enum.KeyCode.Minus then
        speed = math.max(speed - 5, 10)
    end
end)

flyButton.MouseButton1Click:Connect(toggleFly)
